<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AstroBeats</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #1e1e2f;
      color: #fff;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      min-height: 100vh;
      margin: 0;
      padding: 20px;
    }

    h1 {
      margin-bottom: 20px;
    }

    #cards-container {
      display: grid;
      grid-template-columns: repeat(2, 150px);
      grid-template-rows: repeat(2, 200px);
      gap: 20px;
      margin-bottom: 20px;
    }

    .card {
      width: 150px;
      height: 200px;
      perspective: 1000px;
      cursor: pointer;
    }

    .card-inner {
      position: relative;
      width: 100%;
      height: 100%;
      transition: transform 0.6s;
      transform-style: preserve-3d;
    }

    .card.flip .card-inner {
      transform: rotateY(180deg);
    }

    .card-front, .card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      backface-visibility: hidden;
      border-radius: 8px;
      object-fit: cover;
      box-shadow: 0 4px 8px rgba(0,0,0,0.3);
    }

    .card-front {
      transform: rotateY(180deg);
    }

    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 6px;
      background: #ff4081;
      color: #fff;
      cursor: pointer;
      margin-bottom: 20px;
    }

    textarea {
      width: 320px;
      height: 100px;
      border-radius: 8px;
      border: 1px solid #444;
      padding: 10px;
      resize: none;
      font-size: 14px;
      background: #2a2a3c;
      color: #fff;
    }

    #journal-entries {
      margin-top: 10px;
      width: 340px;
      max-height: 200px;
      overflow-y: auto;
      border: 1px solid #444;
      padding: 10px;
      border-radius: 8px;
      background: #222233;
    }

    #journal-entries p {
      margin: 0 0 5px 0;
      font-size: 14px;
      border-bottom: 1px solid #444;
      padding-bottom: 3px;
    }
  </style>
</head>
<body>

  <h1>AstroBeats</h1>

  <button id="shuffle-button">Shuffle Cards</button>

  <div id="cards-container">
    <!-- Card 1: Astrology Body -->
    <div class="card" id="card1">
      <div class="card-inner">
        <img class="card-back" src="astrology/back.jpg" alt="Card Back">
        <img class="card-front" src="" alt="Card Front">
      </div>
    </div>

    <!-- Card 2: Astrology Sign -->
    <div class="card" id="card2">
      <div class="card-inner">
        <img class="card-back" src="astrology/back.jpg" alt="Card Back">
        <img class="card-front" src="" alt="Card Front">
      </div>
    </div>

    <!-- Card 3: Astrology House -->
    <div class="card" id="card3">
      <div class="card-inner">
        <img class="card-back" src="astrology/back.jpg" alt="Card Back">
        <img class="card-front" src="" alt="Card Front">
      </div>
    </div>

    <!-- Card 4: Crystal -->
    <div class="card" id="card4">
      <div class="card-inner">
        <img class="card-back" src="astrology/back.jpg" alt="Card Back">
        <img class="card-front" src="" alt="Card Front">
      </div>
    </div>
  </div>

  <textarea id="journal" placeholder="Write your journal entry..."></textarea>
  <button id="save-journal">Save Entry</button>

  <div id="journal-entries"></div>

  <script>
    let data = {}; // assume you have already loaded data.json via a separate script tag

    const cardIds = ['card1','card2','card3','card4'];
    const cards = cardIds.map(id => document.getElementById(id));

    // Flip card on click
    cards.forEach(card => {
      card.addEventListener('click', () => {
        card.classList.toggle('flip');
      });
    });

    // Utility to pick a random item from array
    function getRandomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    // Shuffle cards
    function shuffleCards() {
      if (!data.astrology || !data.crystals) return;

      // Card 1: Body
      const bodyCard = getRandomItem(data.astrology.body);
      document.querySelector('#card1 .card-front').src = `astrology/body/${bodyCard}.jpg`;

      // Card 2: Sign
      const signCard = getRandomItem(data.astrology.signs);
      document.querySelector('#card2 .card-front').src = `astrology/sign/${signCard}.jpg`;

      // Card 3: House
      const houseCard = getRandomItem(data.astrology.houses);
      document.querySelector('#card3 .card-front').src = `astrology/houses/${houseCard}.jpg`;

      // Card 4: Crystal
      const crystalCard = getRandomItem(data.crystals);
      document.querySelector('#card4 .card-front').src = crystalCard.front;
      // store text for later if needed
      document.querySelector('#card4').dataset.crystalText = crystalCard.text;

      // Reset flips
      cards.forEach(card => card.classList.remove('flip'));
    }

    document.getElementById('shuffle-button').addEventListener('click', shuffleCards);

    // Journal functionality
    const journalInput = document.getElementById('journal');
    const journalDisplay = document.getElementById('journal-entries');
    document.getElementById('save-journal').addEventListener('click', () => {
      const entry = journalInput.value.trim();
      if (entry === '') return;

      const existing = JSON.parse(localStorage.getItem('journal') || '[]');
      existing.push(entry);
      localStorage.setItem('journal', JSON.stringify(existing));

      // Update display
      renderJournal();
      journalInput.value = '';
    });

    function renderJournal() {
      const entries = JSON.parse(localStorage.getItem('journal') || '[]');
      journalDisplay.innerHTML = '';
      entries.forEach(e => {
        const p = document.createElement('p');
        p.textContent = e;
        journalDisplay.appendChild(p);
      });
    }

    // Initial load
    renderJournal();
    shuffleCards();
  </script>

</body>
</html>

<script>
    fetch('data.json')
  .then(res => res.json())
  .then(data => {
    console.log(data);
    // Use this data to render your astrology + crystal cards
  });
</script>