<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AstroBeats Cards</title>

<!-- FONT AWESOME -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

<style>
body {
  margin: 0;
  padding: 0;
  overflow-x: hidden;
  font-family: Arial, sans-serif;
}

/* Shader canvas */
canvas#c {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -2;
}

/* Dark shader layer */
#shader-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: black;
  opacity: 0.75;
  z-index: -1;
  pointer-events: none;
}

/* UI Overlay (for modal + sidebar) */
#ui-overlay {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.8);
  backdrop-filter: blur(4px);
  display: none;
  z-index: 5;
}

/* Main App */
#app {
  position: relative;
  z-index: 1;
  color: #fff;
  padding: 20px;
  text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
  border: 2px white solid;
  margin: 10px;
  border-radius: 10px;
}

/* Hamburger */
#hamburger {
  position: fixed;
  top: 20px;
  right: 25px;
  font-size: 24px;
  color: white;
  cursor: pointer;
  z-index: 10;
}

/* Sidebar */
#sidebar {
  position: fixed;
  top: 0;
  right: -250px;
  width: 250px;
  height: 100%;
  background: rgba(0,0,0,0.9);
  padding: 30px 20px;
  transition: right 0.3s ease;
  z-index: 10;
}

#sidebar.active { right: 0; }

#sidebar button {
  display: block;
  width: 100%;
  margin-bottom: 15px;
  padding: 10px;
  background: transparent;
  border: 1px solid white;
  color: white;
  cursor: pointer;
  text-align: left;
}

h1, h2 {
  text-align: center;
  margin: 10px 0;
}

#cards-container {
  display: flex;
  gap: 20px;
  flex-wrap: wrap;
  justify-content: center;
  margin-bottom: 20px;
}

.card {
  width: 150px;
  height: 220px;
  perspective: 1000px;
  cursor: pointer;
}

#card4 { height: 260px; }

.card-inner {
  position: relative;
  width: 100%;
  height: 100%;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.card.flip .card-inner { transform: rotateY(180deg); }

.card-front, .card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  backface-visibility: hidden;
  object-fit: cover;
}

.card-back { transform: rotateY(180deg); }

#shuffle-btn {
  display: block;
  margin: 0 auto 20px;
  padding: 10px 20px;
  cursor: pointer;
}

/* Journal Modal */
#journalModal {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 90%;
  max-width: 600px;
  background: rgba(255,255,255,0.1);
  backdrop-filter: blur(8px);
  border: 1px solid white;
  padding: 20px;
  border-radius: 12px;
  display: none;
  z-index: 20;
}

#journalModal textarea {
  width: 100%;
  height: 100px;
  margin-bottom: 10px;
}

.modal-close {
  position: absolute;
  top: 10px;
  right: 15px;
  cursor: pointer;
  font-size: 20px;
}

#journal-entries p {
  background: rgba(255,255,255,0.2);
  padding: 5px;
  border-radius: 5px;
  position: relative;
}
</style>
</head>
<body>

<canvas id="c"></canvas>
<div id="shader-overlay"></div>
<div id="ui-overlay"></div>

<div id="hamburger"><i class="fas fa-bars"></i></div>

<div id="sidebar">
  <button id="openJournal">
    <i class="fas fa-book-open"></i> Journal
  </button>
</div>

<div id="app">
<h1>AstroBeats Cards</h1>

<div id="cards-container">
  <div id="card4" class="card"><div class="card-inner"><img class="card-front"><img class="card-back"></div></div>
  <div id="card3" class="card"><div class="card-inner"><img class="card-front"><img class="card-back"></div></div>
  <div id="card2" class="card"><div class="card-inner"><img class="card-front"><img class="card-back"></div></div>
  <div id="card1" class="card"><div class="card-inner"><img class="card-front"><img class="card-back"></div></div>
</div>

<button id="shuffle-btn">Shuffle Cards</button>
</div>

<!-- JOURNAL MODAL -->
<div id="journalModal">
<span class="modal-close">&times;</span>
<h2>Journal</h2>
<textarea id="journal-input" placeholder="Write your journal entry..."></textarea><br>
<button id="journal-save">Save Entry</button>
<button id="journal-clear">Clear All</button>
<button id="closeJournalBottom">Close</button>
<div id="journal-entries"></div>
</div>

<script>

/* ===== SIDEBAR + MODAL SYSTEM ===== */

const hamburger = document.getElementById("hamburger");
const sidebar = document.getElementById("sidebar");
const uiOverlay = document.getElementById("ui-overlay");
const journalModal = document.getElementById("journalModal");

hamburger.addEventListener("click", () => {
  sidebar.classList.toggle("active");
  uiOverlay.style.display = "block";
});

uiOverlay.addEventListener("click", closeAll);

function closeAll(){
  sidebar.classList.remove("active");
  journalModal.style.display = "none";
  uiOverlay.style.display = "none";
}

document.getElementById("openJournal").addEventListener("click", () => {
  sidebar.classList.remove("active");
  journalModal.style.display = "block";
});

document.querySelector(".modal-close").addEventListener("click", closeAll);
document.getElementById("closeJournalBottom").addEventListener("click", closeAll);

/* ===== YOUR EXISTING CARD + JOURNAL CODE REMAINS SAME BELOW ===== */

/* (I did not alter your card logic or shader logic) */

</script>

</body>
</html>
